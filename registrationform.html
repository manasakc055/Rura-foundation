<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>CXO Connect Pass Registration</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/Glide.js/3.6.0/css/glide.core.min.css" rel="stylesheet">
  <link href="https://cdnjs.cloudflare.com/ajax/libs/Glide.js/3.6.0/css/glide.theme.min.css" rel="stylesheet">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/Glide.js/3.6.0/glide.min.js"></script>
  <script
    src="https://cdn.tailwindcss.com/3.4.5?plugins=forms@0.5.7,typography@0.5.13,aspect-ratio@0.4.2,container-queries@0.1.1"></script>


  <!-- Bootstrap CSS -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
  <style>
    /* Darkened background image using a pseudo-element */
    body {
      position: relative;
      min-height: 100vh;
      margin: 0;
      padding-top: 60px;
    }

    body::before {
      content: "";
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      background: url('./assets/form-bg.jpg') no-repeat center center fixed;
      background-size: cover;
      filter: brightness(0.5); 
      /* background-color: rgba(255, 255, 255, 0.9); */

      /* background: linear-gradient(to right, #77818b, #a2abb4); */
      z-index: -1;
    }

    /* Semi-transparent container for the form */
    .container {
      /* background-color: rgba(255, 255, 255, 0.9); */
      padding: 20px;
      /* border-radius: 8px;

      box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2), 0 6px 20px 0 rgba(0, 0, 0, 0.19); */

    }

    .hidden {
      display: none;
    }

    /* Navbar styling */
    header {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      z-index: 50;
      /* Ensure navbar stays on top */
      background-color: rgba(255, 255, 255, 0.95);
      /* Make the navbar slightly transparent */
      backdrop-filter: blur(10px);
      /* Add some blur effect */
      border-bottom: 1px solid #ddd;
      /* Optional: add a bottom border for separation */
    }

    .form-control,
    .form-select {
      border: 1px solid #ccc !important;
      /* Grey border */
      border-radius: 7px !important;
      /* Rounded corners */
      padding: 10px;
      /* Space inside the input */
      font-size: 16px;
      /* Font size for better readability */
    }



    /* You can also change the focus state */
    .form-control:focus {
      border-color: #4CAF50;
      /* Green border on focus (for example) */
      outline: none;
      /* Remove default outline */
    }

    #registrationForm button[type="submit"] {
      width: 100%;
    }

    .form-container {
      max-width: 800px;
      margin: auto;
      background: #fff;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.1);
    }

    fieldset {
      border: 1px solid #ddd;
      padding: 15px;
      border-radius: 10px;
    }

    legend {
      font-size: 1.2rem;
      font-weight: 600;
    }

    .hidden {
      display: none;
    }

    @media (max-width: 576px) {
      .form-container {
        padding: 15px;
      }
    }
  </style>
</head>

<body>
  <header
    class="fixed w-full z-50  shadow-[0_4px_6px_rgba(0,0,0,0.1)] bg-white/95 backdrop-blur-sm border-b border-gray-100">
    <nav class="max-w-8xl mx-auto px-4 sm:px-6 lg:px-8">
      <div class="flex justify-between h-16">
        <!-- Logo -->
        <div class="flex">
          <a href="/" class="flex items-center">
            <span class="ml-3 text-xl font-semibold text-gray-900">RURA Foundation</span>
          </a>
        </div>

        <!-- Desktop Navigation -->
        <div class="hidden md:flex items-center space-x-8">
          <a href="index.html" class="text-gray-700 hover:text-black">Home</a>
          <a href="about-us.html" class="text-gray-700 hover:text-black">About Us</a>
          <!-- <a href="initiatives" class="text-gray-700 hover:text-black">Initiatives</a> -->
          <a href="cxo.html" class="text-gray-700 hover:text-black">CXO connect</a>
          <a href="contact.html" class="text-gray-700 hover:text-black">Contact</a>
          <!-- <button class="!rounded-button rounded-md bg-black text-white px-6 py-2 hover:bg-black/90">Donate</button> -->
        </div>

        <!-- Mobile Menu Button (Visible on smaller screens) -->
        <div class="md:hidden flex items-center">
          <button id="menu-button" class="text-gray-700 hover:text-black">
            <svg class="h-6 w-6" fill="none" stroke="currentColor" viewBox="0 0 24 24"
              xmlns="http://www.w3.org/2000/svg">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path>
            </svg>
          </button>
        </div>
      </div>
    </nav>

    <!-- Mobile Menu (Hidden by default) -->
    <div id="mobile-menu" class="md:hidden hidden bg-white shadow-md">
      <div class="px-4 py-2">
        <a href="index.html" class="block text-gray-700 hover:text-black py-2">Home</a>
        <a href="about-us.html" class="block text-gray-700 hover:text-black py-2">About Us</a>
        <!-- <a href="initiatives" class="block text-gray-700 hover:text-black py-2">Initiatives</a> -->
        <a href="cxo.html" class="block text-gray-700 hover:text-black py-2">CXO connect</a>
        <a href="contact.html" class="block text-gray-700 hover:text-black py-2">Contact</a>
        <!-- <button class="!rounded-button rounded-md bg-black text-black text-white px-6 py-2 w-full mt-2 hover:bg-black text-black/90">Donate</button> -->
      </div>
    </div>
  </header>
  <div class="container my-5">
    <div class="form-container">

      <legend class="text-center mb-4">CXO Connect Pass Registration</legend>
      <form id="registrationForm">
        <!-- 1. Personal Details -->
        <fieldset class="border p-3 mb-4 rounded">
          <legend class="w-auto px-2">Personal Details</legend>
          <div class="mb-3">
            <label for="fullName" class="form-label">Full Name</label>
            <input type="text" id="fullName" name="fullName" class="form-control border-radius" required />
          </div>
          <div class="mb-3">
            <label for="contactNumber" class="form-label">Contact Number</label>
            <input type="tel" id="contactNumber" name="contactNumber" class="form-control" required />
          </div>
          <div class="mb-3">
            <label for="emailAddress" class="form-label">Email Address</label>
            <input type="email" id="emailAddress" name="emailAddress" class="form-control" required />
          </div>
          <div class="mb-3">
            <label for="linkedinProfile" class="form-label">LinkedIn Profile (Optional)</label>
            <input type="url" id="linkedinProfile" name="linkedinProfile" class="form-control" />
          </div>
          <div class="mb-3">
            <label for="bloodGroup" class="form-label">Blood Group (Optional)</label>
            <input type="text" id="bloodGroup" name="bloodGroup" class="form-control" />
          </div>
        </fieldset>

        <!-- 2. Professional/Academic Details -->
        <fieldset class="border p-3 mb-4  rounded">
          <legend class="w-auto px-2">Professional/Academic Details</legend>
          <div class="mb-3">
            <label for="professionalType" class="form-label">Are you an Entrepreneur, Business Professional, Student, or
              Working Professional?</label>
            <select id="professionalType" name="professionalType" class="form-select " required>
              <option value="">-- Select --</option>
              <option value="entrepreneur">Entrepreneur</option>
              <option value="businessProfessional">Business Professional</option>
              <option value="student">Student</option>
              <option value="workingProfessional">Working Professional</option>
            </select>
          </div>

          <!-- Entrepreneur Fields -->
          <div id="entrepreneurFields" class="hidden">
            <div class="mb-3">
              <label for="startupName" class="form-label">Startup Name</label>
              <input type="text" id="startupName" name="startupName" class="form-control" />
            </div>
            <div class="mb-3">
              <label for="startupIndustry" class="form-label">Industry</label>
              <input type="text" id="startupIndustry" name="startupIndustry" class="form-control" />
            </div>
            <div class="mb-3">
              <label for="startupWebsite" class="form-label">Website (if any)</label>
              <input type="url" id="startupWebsite" name="startupWebsite" class="form-control" />
            </div>
          </div>

          <!-- Business Professional Fields -->
          <div id="businessProfessionalFields" class="hidden">
            <div class="mb-3">
              <label for="businessName" class="form-label">Business Name</label>
              <input type="text" id="businessName" name="businessName" class="form-control" />
            </div>
            <div class="mb-3">
              <label for="businessType" class="form-label">Type of Business</label>
              <input type="text" id="businessType" name="businessType" class="form-control" />
            </div>
            <div class="mb-3">
              <label for="businessWebsite" class="form-label">Website (if any)</label>
              <input type="url" id="businessWebsite" name="businessWebsite" class="form-control" />
            </div>
          </div>

          <!-- Student Fields -->
          <div id="studentFields" class="hidden">
            <div class="mb-3">
              <label for="collegeName" class="form-label">College Name</label>
              <input type="text" id="collegeName" name="collegeName" class="form-control" />
            </div>
            <div class="mb-3">
              <label for="courseYear" class="form-label">Course &amp; Year</label>
              <input type="text" id="courseYear" name="courseYear" class="form-control" />
            </div>
          </div>

          <!-- Working Professional Fields -->
          <div id="workingProfessionalFields" class="hidden">
            <div class="mb-3">
              <label for="companyName" class="form-label">Company Name</label>
              <input type="text" id="companyName" name="companyName" class="form-control" />
            </div>
            <div class="mb-3">
              <label for="jobTitle" class="form-label">Job Title</label>
              <input type="text" id="jobTitle" name="jobTitle" class="form-control" />
            </div>
          </div>
        </fieldset>

        <!-- 3. Reason for Attending -->
        <fieldset class="border p-3 mb-4 rounded">
          <legend class="w-auto px-2">Reason for Attending</legend>
          <div class="mb-3">
            <label for="interestReason" class="form-label">Why are you interested in CXO Connect?</label>
            <textarea id="interestReason" name="interestReason" rows="3" class="form-control" required></textarea>
          </div>
          <div class="mb-3">
            <label class="form-label">Areas of Interest (Select all that apply):</label>
            <div class="form-check">
              <input class="form-check-input" type="checkbox" name="interests" value="Networking"
                id="interestNetworking" />
              <label class="form-check-label" for="interestNetworking">Networking</label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="checkbox" name="interests" value="Funding & Investment"
                id="interestFunding" />
              <label class="form-check-label" for="interestFunding">Funding & Investment</label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="checkbox" name="interests" value="Business Networking"
                id="interestBusiness" />
              <label class="form-check-label" for="interestBusiness">Business Networking</label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="checkbox" name="interests" value="Growth Strategies"
                id="interestGrowth" />
              <label class="form-check-label" for="interestGrowth">Growth Strategies</label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="checkbox" name="interests" value="Tech & Innovation"
                id="interestTech" />
              <label class="form-check-label" for="interestTech">Tech & Innovation</label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="checkbox" name="interests" value="Hiring & Talent Acquisition"
                id="interestHiring" />
              <label class="form-check-label" for="interestHiring">Hiring & Talent Acquisition</label>
            </div>
            <div class="form-check">
              <input class="form-check-input" type="checkbox" name="interests" value="Other"
                id="otherInterestCheckbox" />
              <label class="form-check-label" for="otherInterestCheckbox">Other (Specify)</label>
            </div>
            <div class="mt-2 hidden" id="otherInterestField">
              <input type="text" id="otherInterest" name="otherInterest" class="form-control"
                placeholder="Please specify other interests" />
            </div>
          </div>
        </fieldset>

        <!-- 4. Contribution to the Event -->
        <fieldset class="border p-3 mb-4 rounded">
          <legend class="w-auto px-2">Contribution to the Event</legend>
          <div class="mb-3">
            <label class="form-label">Would you like to be a speaker, panelist, or share your startup journey?</label>
            <div class="form-check form-check-inline">
              <input class="form-check-input" type="radio" name="contribution" value="yes" id="contributionYes"
                required />
              <label class="form-check-label" for="contributionYes">Yes</label>
            </div>
            <div class="form-check form-check-inline">
              <input class="form-check-input" type="radio" name="contribution" value="no" id="contributionNo"
                required />
              <label class="form-check-label" for="contributionNo">No</label>
            </div>
          </div>
          <div class="mb-3 hidden" id="contributionDetails">
            <label for="contributionTopic" class="form-label">If yes, briefly describe your topic:</label>
            <textarea id="contributionTopic" name="contributionTopic" rows="3" class="form-control"></textarea>
          </div>
          <div class="mb-3 hidden" id="mentorField">
            <label class="form-label">Would you like to mentor a startup?</label>
            <div class="form-check form-check-inline">
              <input class="form-check-input" type="radio" name="mentor" value="yes" id="mentorYes" />
              <label class="form-check-label" for="mentorYes">Yes</label>
            </div>
            <div class="form-check form-check-inline">
              <input class="form-check-input" type="radio" name="mentor" value="no" id="mentorNo" />
              <label class="form-check-label" for="mentorNo">No</label>
            </div>
          </div>
        </fieldset>

        <!-- 5. Pass Details & Preferences -->
        <fieldset class="border p-3 mb-4 rounded">
          <legend class="w-auto px-2">Pass Details &amp; Preferences</legend>
          <div class="mb-3">
            <label class="form-label">Preferred Mode of Attendance:</label>
            <div class="form-check">
              <input class="form-check-input" type="radio" name="attendanceMode" value="inPerson"
                id="attendanceInPerson" checked />
              <label class="form-check-label" for="attendanceInPerson">In-Person</label>

            </div>
          </div>
        </fieldset>

        <!-- 6. Payment & Confirmation -->
        <!-- <fieldset class="border p-3 mb-4 rounded">
        <legend class="w-auto px-2">Payment &amp; Confirmation</legend>
        <div class="mb-3">
          <label for="paymentMethod" class="form-label">Payment Method</label>
          <select id="paymentMethod" name="paymentMethod" class="form-select" required>
            <option value="">-- Select Payment Method --</option>
            <option value="upi">UPI</option>
            <option value="netBanking">Net Banking</option>
            <option value="card">Credit/Debit Card</option>
            <option value="payAtVenue">Pay at Venue</option>
          </select>
        </div>
        <div class="mb-3">
          <label for="paymentReceipt" class="form-label">Upload Payment Receipt (if applicable)</label>
          <input type="file" id="paymentReceipt" name="paymentReceipt" class="form-control" accept="image/*,application/pdf" />
        </div>
      </fieldset> -->

        <button type="submit" class="btn btn-dark ">Submit</button>

      </form>
    </div>
  </div>
  <footer class="bg-gray-900 text-white pt-16 pb-8">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
      <!-- Footer Grid Layout -->
      <div class="grid grid-cols-1 md:grid-cols-4 gap-12 mb-12">

        <!-- Logo and Description -->
        <div>
          <!-- <img src="https://ai-public.creatie.ai/gen_page/logo_placeholder.png" alt="RURA Foundation"
                    class="h-8 mb-6"> -->
          <h1 class=" font-bold">RURA Foundation</h1>
          <p class="text-gray-400">Transforming lives through innovation and sustainability</p>
        </div>

        <!-- Quick Links -->
        <div>
          <h3 class="text-lg font-semibold mb-4">Quick Links</h3>
          <ul class="space-y-2">
            <li><a href="index.html" class="text-gray-400 hover:text-white">Home</a></li>
            <li><a href="about-us.html" class="text-gray-400 hover:text-white">About Us</a></li>
            <li><a href="cxo.html" class="text-gray-400 hover:text-white">CXO Connect</a></li>
            <li><a href="contact.html" class="text-gray-400 hover:text-white">Contact</a></li>
          </ul>
        </div>

        <!-- Contact Info -->
        <div>
          <h3 class="text-lg font-semibold mb-4">Contact</h3>
          <ul class="space-y-2">
            <li class="text-gray-400"><i class="fas fa-map-marker-alt mr-2"></i>Kakinada</li>
            <li class="text-gray-400"><i class="fas fa-phone mr-2"></i>+91 9492859634</li>
            <li class="text-gray-400"><i class="fas fa-envelope mr-2"></i>info@rurafoundation.org</li>
          </ul>
        </div>

        <!-- Social Media Links -->
        <div>
          <h3 class="text-lg font-semibold mb-4">Follow Us</h3>
          <div class="flex space-x-4">
            <a href="#" class="text-gray-400 hover:text-white"><i class="fab fa-facebook-f"></i></a>
            <a href="#" class="text-gray-400 hover:text-white"><i class="fab fa-twitter"></i></a>
            <a href="#" class="text-gray-400 hover:text-white"><i class="fab fa-linkedin-in"></i></a>
            <a href="#" class="text-gray-400 hover:text-white"><i class="fab fa-instagram"></i></a>
          </div>
        </div>
      </div>

      <!-- Footer Bottom Section -->
      <!-- <div class="border-t border-gray-800 pt-8">
        <div class="flex flex-col md:flex-row justify-between items-center">
          <p class="text-gray-400 text-sm">© 2024 RURA Foundation. All rights reserved.</p>
          <div class="flex space-x-4 mt-4 md:mt-0">
            <a href="#" class="text-gray-400 hover:text-white text-sm">Privacy Policy</a>
            <a href="#" class="text-gray-400 hover:text-white text-sm">Terms of Service</a>
          </div>
        </div>
      </div> -->
      <!-- Footer Bottom Section -->
      <div class="border-t border-gray-800 pt-8">
        <div class="flex flex-col items-center justify-center text-center space-y-2">
          <p class="text-gray-400 text-sm">© 2024 RURA Foundation. All rights reserved.</p>
          <div class="flex items-center space-x-2">
            <p class="text-gray-400 text-sm">Developed by</p>
            <div class="bg-white p-1 rounded">
              <a href="https://www.unistacx.com/" target="_blank">
                <img src="./assets/unistacx_logo.svg" alt="UniStacx Logo" class="h-6">
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </footer>
  <script>
    document.addEventListener('DOMContentLoaded', () => {
      const form = document.getElementById('registrationForm');

      form.addEventListener('submit', async (e) => {
        e.preventDefault();

        // Get form elements
        const fullName = document.getElementById('fullName');
        const contactNumber = document.getElementById('contactNumber');
        const emailAddress = document.getElementById('emailAddress');
        const linkedinProfile = document.getElementById('linkedinProfile');
        const professionalType = document.getElementById('professionalType');
        const interestReason = document.getElementById('interestReason');
        const contributionRadios = document.querySelectorAll('input[name="contribution"]');

        // Clear previous error messages
        document.querySelectorAll('.error').forEach(el => el.remove());

        let isValid = true;

        // Helper function to show errors
        function showError(input, message) {
          const errorDiv = document.createElement('div');
          errorDiv.classList.add('error', 'text-danger', 'small');
          errorDiv.innerText = message;
          input.classList.add('is-invalid');
          input.parentElement.appendChild(errorDiv);
          isValid = false;
        }

        // Remove error on input change
        function removeError(input) {
          input.classList.remove('is-invalid');
          const errorDiv = input.parentElement.querySelector('.error');
          if (errorDiv) errorDiv.remove();
        }

        // Validate Full Name
        if (fullName.value.trim() === '') {
          showError(fullName, 'Full Name is required.');
        } else {
          removeError(fullName);
        }

        // Validate Contact Number (10-digit Indian format)
        const phonePattern = /^[6-9]\d{9}$/;
        if (!phonePattern.test(contactNumber.value.trim())) {
          showError(contactNumber, 'Enter a valid 10-digit phone number.');
        } else {
          removeError(contactNumber);
        }

        // Validate Email
        const emailPattern = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailPattern.test(emailAddress.value.trim())) {
          showError(emailAddress, 'Enter a valid email address.');
        } else {
          removeError(emailAddress);
        }

        // Validate LinkedIn Profile (Optional but should be valid if provided)
        const linkedinPattern = /^(https?:\/\/)?(www\.)?linkedin\.com\/.*$/;
        if (linkedinProfile.value.trim() !== '' && !linkedinPattern.test(linkedinProfile.value.trim())) {
          showError(linkedinProfile, 'Enter a valid LinkedIn profile URL.');
        } else {
          removeError(linkedinProfile);
        }

        // Validate Professional Type
        if (professionalType.value === '') {
          showError(professionalType, 'Please select your professional type.');
        } else {
          removeError(professionalType);
        }

        // Validate Entrepreneur/Business/Student/Professional Fields
        if (professionalType.value === 'entrepreneur') {
          const startupName = document.getElementById('startupName');
          if (startupName.value.trim() === '') {
            showError(startupName, 'Startup name is required.');
          } else {
            removeError(startupName);
          }
        } else if (professionalType.value === 'businessProfessional') {
          const businessName = document.getElementById('businessName');
          if (businessName.value.trim() === '') {
            showError(businessName, 'Business name is required.');
          } else {
            removeError(businessName);
          }
        } else if (professionalType.value === 'student') {
          const collegeName = document.getElementById('collegeName');
          if (collegeName.value.trim() === '') {
            showError(collegeName, 'College name is required.');
          } else {
            removeError(collegeName);
          }
        } else if (professionalType.value === 'workingProfessional') {
          const companyName = document.getElementById('companyName');
          if (companyName.value.trim() === '') {
            showError(companyName, 'Company name is required.');
          } else {
            removeError(companyName);
          }
        }

        // Validate Interest Reason
        if (interestReason.value.trim() === '') {
          showError(interestReason, 'Please specify your reason for attending.');
        } else {
          removeError(interestReason);
        }

        // Validate Checkbox Selection (At least one interest)
        // const interestCheckboxes = document.querySelectorAll('input[name="interests"]:checked');
        //  if (interestCheckboxes.length === 0) {
        //   showError(document.querySelector('input[name="interests"]'), 'Select at least one area of interest.');
        //  }

        // Validate Contribution Selection (At least one radio must be selected)
        let contributionSelected = false;
        contributionRadios.forEach(radio => {
          if (radio.checked) contributionSelected = true;
        });
        if (!contributionSelected) {
          showError(contributionRadios[0], 'Please choose whether you want to contribute.');
        }

        // If form is valid, proceed with submission
        if (isValid) {
          const formData = new FormData(form);
          const data = {
            full_name: formData.get('fullName'),
            contact_number: formData.get('contactNumber'),
            email_address: formData.get('emailAddress'),
            linkedin_profile: formData.get('linkedinProfile'),
            professional_type: formData.get('professionalType'),
            interest_reason: formData.get('interestReason'),
            contribution: formData.get('contribution'),
            attendance_mode: formData.get('attendanceMode'),
          };

          try {
            const { data: insertedData, error } = await supabaseClient
              .from('cxo_registrations1')
              .insert([data]);

            if (error) {
              console.error('Error inserting data:', error);
              alert('There was an error submitting your registration.');
            } else {
              console.log('Inserted data:', insertedData);
              form.reset();
              window.location.href = "thanks.html";
            }
          } catch (err) {
            console.error('Unexpected error:', err);
            alert('An unexpected error occurred.');
          }
        }
      });
    });
  </script>
  <!-- Bootstrap Bundle with Popper -->
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <!-- Our custom script using ES modules -->
  <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
  <script>

  </script>

  <script>
    const { createClient } = supabase
    // Replace these with your actual Supabase details
    const supabaseUrl = 'https://owzaetzxjsspqkwcucqg.supabase.co';
    const supabaseKey = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Im93emFldHp4anNzcHFrd2N1Y3FnIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDA0MTc2MjcsImV4cCI6MjA1NTk5MzYyN30.fK9JpZ5XaBh2d0YZGgkcY4MJhZn9RQCujTp4G0J2hW8';
    const supabaseClient = createClient(supabaseUrl, supabaseKey);



    // Wait for the DOM to be ready
    document.addEventListener('DOMContentLoaded', () => {
      // Toggle form fields based on professional type
      const professionalTypeSelect = document.getElementById('professionalType');
      const entrepreneurFields = document.getElementById('entrepreneurFields');
      const businessProfessionalFields = document.getElementById('businessProfessionalFields');
      const studentFields = document.getElementById('studentFields');
      const workingProfessionalFields = document.getElementById('workingProfessionalFields');
      const mentorField = document.getElementById('mentorField');

      professionalTypeSelect.addEventListener('change', function () {
        entrepreneurFields.classList.add('hidden');
        businessProfessionalFields.classList.add('hidden');
        studentFields.classList.add('hidden');
        workingProfessionalFields.classList.add('hidden');
        mentorField.classList.add('hidden');

        if (this.value === 'entrepreneur') {
          entrepreneurFields.classList.remove('hidden');
          mentorField.classList.remove('hidden');
        } else if (this.value === 'businessProfessional') {
          businessProfessionalFields.classList.remove('hidden');
        } else if (this.value === 'student') {
          studentFields.classList.remove('hidden');
        } else if (this.value === 'workingProfessional') {
          workingProfessionalFields.classList.remove('hidden');
        }
      });

      // Toggle "Other" interest field
      const otherInterestCheckbox = document.getElementById('otherInterestCheckbox');
      const otherInterestField = document.getElementById('otherInterestField');
      otherInterestCheckbox.addEventListener('change', function () {
        if (this.checked) {
          otherInterestField.classList.remove('hidden');
        } else {
          otherInterestField.classList.add('hidden');
        }
      });

      // Toggle contribution topic field
      const contributionRadios = document.getElementsByName('contribution');
      const contributionDetails = document.getElementById('contributionDetails');
      Array.from(contributionRadios).forEach(radio => {
        radio.addEventListener('change', function () {
          if (this.value === 'yes') {
            contributionDetails.classList.remove('hidden');
          } else {
            contributionDetails.classList.add('hidden');
          }
        });
      });

      // Handle form submission
      const form = document.getElementById('registrationForm');
      form.addEventListener('submit', async (e) => {
        e.preventDefault();

        const formData = new FormData(form);

        const data = {
          full_name: formData.get('fullName'),
          contact_number: formData.get('contactNumber'),
          email_address: formData.get('emailAddress'),
          linkedin_profile: formData.get('linkedinProfile'),
          blood_group: formData.get('bloodGroup'),
          professional_type: formData.get('professionalType'),
          startup_name: formData.get('startupName'),
          startup_industry: formData.get('startupIndustry'),
          startup_website: formData.get('startupWebsite'),
          business_name: formData.get('businessName'),
          business_type: formData.get('businessType'),
          business_website: formData.get('businessWebsite'),
          college_name: formData.get('collegeName'),
          course_year: formData.get('courseYear'),
          company_name: formData.get('companyName'),
          job_title: formData.get('jobTitle'),
          interest_reason: formData.get('interestReason'),
          interests: formData.getAll('interests').join(', '),
          other_interest: formData.get('otherInterest'),
          contribution: formData.get('contribution'),
          contribution_topic: formData.get('contributionTopic'),
          mentor: formData.get('mentor'),
          attendance_mode: formData.get('attendanceMode'),
          // payment_method: formData.get('paymentMethod')
        };
        const contactNumber = formData.get("contactNumber").trim();
        const emailAddress = formData.get("emailAddress").trim();



        try {
          // ✅ Step 1: Check if the email or contact number already exists
          const { data: existingUser, error: checkError } = await supabaseClient
            .from("cxo_registrations1")
            .select("id")
            .or(`contact_number.eq.${contactNumber},email_address.eq.${emailAddress}`)
            .maybeSingle(); // Fetch only a single record if exists

          if (checkError) {
            console.error("Error checking existing user:", checkError);
            alert("An unexpected error occurred while checking your details.");
            return;
          }

          if (existingUser) {
            // ✅ User already exists, show a warning
            alert("This email or contact number is already registered. Please use different details.");
            return;
          }

          // ✅ Step 2: If no duplicate, proceed with form submission
          const data = {
            full_name: formData.get("fullName"),
            contact_number: contactNumber,
            email_address: emailAddress,
            linkedin_profile: formData.get("linkedinProfile"),
            professional_type: formData.get("professionalType"),
            interest_reason: formData.get("interestReason"),
            contribution: formData.get("contribution"),
            attendance_mode: formData.get("attendanceMode"),
          };

          const { data: insertedData, error } = await supabaseClient
            .from('cxo_registrations1')
            .insert([data]);

          if (error) {
            console.error('Error inserting data:', error);
            alert('There was an error submitting your registration.');
          } else {
            console.log('Inserted data:', insertedData);
            form.reset();
            window.location.href = "thanks.html";

          }
        } catch (err) {
          console.error('Unexpected error:', err);
          alert('An unexpected error occurred.');
        }
      });
    });
  </script>
  <script>
    // Select the menu button and mobile menu elements
    const menuButton = document.getElementById('menu-button');
    const mobileMenu = document.getElementById('mobile-menu');

    // Add a click event listener to toggle the mobile menu visibility
    menuButton.addEventListener('click', () => {
      mobileMenu.classList.toggle('hidden');
    });
  </script>
</body>

</html>